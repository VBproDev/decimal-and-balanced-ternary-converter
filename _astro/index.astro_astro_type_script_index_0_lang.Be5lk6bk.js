function m(e){let t=0;for(let o=0;o<e.length;o++)t=t*3+(e[o]==="T"?-1:parseInt(e[o]));return t}function y(e){if(e===0)return"0";let t="";for(;e!==0;)(e%3+3)%3===0?t="0"+t:(e%3+3)%3===1?(t="1"+t,e-=1):(t="T"+t,e+=1),e=Math.floor(e/3);return t}function M(e){return new Worker("/decimal-and-balanced-ternary-converter/_astro/web-worker-C_RjeOtp.js",{type:"module",name:e?.name})}const d=new M,p=document.querySelector(".numeric-input"),b=document.querySelector(".numeric-base-select"),s=document.querySelector(".conversion-result"),c=document.getElementById("error-banner"),v=document.querySelector(".convert-btn"),f=document.querySelector(".copy-btn"),r=document.getElementById("success-banner"),g=document.querySelector(".download-btn");function L(){r.setAttribute("aria-live","polite"),r.classList.remove("disabled-banner"),r.classList.add("active-success"),r.innerText="Calculating..."}function h(){r.classList.remove("active-success"),r.classList.add("disabled-banner"),r.removeAttribute("aria-live")}function u(e,t){throw c.setAttribute("aria-live","assertive"),c.classList.remove("disabled-banner"),c.classList.add("active-error"),c.innerText=e,setTimeout(()=>{c.classList.remove("active-error"),c.classList.add("disabled-banner"),c.removeAttribute("aria-live")},2e3),new Error(t)}async function l(e){r.setAttribute("aria-live","polite"),r.classList.remove("disabled-banner"),r.classList.add("active-success"),r.innerText=e,await new Promise(t=>setTimeout(t,2e3)),r.classList.remove("active-success"),r.classList.add("disabled-banner"),r.removeAttribute("aria-live")}async function T(){const e=p.value.replace(/\s+/g,"");let t=b.value.toLowerCase(),o=[];if(t==="balanced-ternary"){const i=Number(e);if(/\d+,\d+/.test(e)){const n=e.split(",").map(a=>Number(a)).sort((a,E)=>a-E);if(n[1]-n[0]>15e4)L(),d.onmessage=a=>{s.innerHTML=a.data.join(" "),h(),l("Done!")},d.postMessage({range:n,numSys:t});else{for(let a=n[0];a<=n[1];a++)o.push(a);s.innerHTML=o.map(a=>y(a)).join(" "),l("Done!")}}else isNaN(i)?u("Input should be a decimal!",`Input was '${i}'. Base was ${t}. The program has identified the input as not purely numeric.`):(s.innerHTML=y(i),l("Done!"))}else if(/[T10]+,[T10]+/.test(e)){const i=e.split(",").map(n=>m(n)).sort((n,a)=>n-a);if(i[1]-i[0]>5e5)L(),d.onmessage=n=>{s.innerHTML=n.data.join(" "),h(),l("Done!")},d.postMessage({range:i,numSys:t});else{for(let n=i[0];n<=i[1];n++)o.push(n);s.innerHTML=o.join(" "),l("Done!")}}else/[T10]+/.test(e)?(s.innerHTML=m(e).toString(),l("Done!")):u("Input should be a balanced ternary number!",`Input was '${e}'. Base was ${t}. The program has identified the input as not purely using the characters 'T' , '0' and '1'.`)}function w(){navigator.clipboard.writeText(s.innerHTML),l("Copied to clipboard!")}function k(){const e=URL.createObjectURL(new Blob([s.innerHTML],{type:"text/plain"})),t=document.createElement("a");t.href=e,t.download="results.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)}v.addEventListener("click",()=>T());v.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&T()});f.addEventListener("click",()=>{s.innerHTML.length>5e5&&u("Output this large can only be downloaded!",`Output is ${s.innerHTML.length} characters long. The program has identified the output as too large to be copied to the clipboard.`),w()});f.addEventListener("keydown",e=>{s.innerHTML.length>5e5&&u("Output this large can only be downloaded!",`Output is ${s.innerHTML.length} characters long. The program has identified the output as too large to be copied to the clipboard.`),(e.key==="Enter"||e.key===" ")&&w()});b.addEventListener("change",e=>{b.value.toLowerCase()==="balanced-ternary"?p.placeholder="Enter decimal":p.placeholder="Enter balanced ternary"});g.addEventListener("click",k);g.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&k()});
